{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "levels-difficulty-index.schema.json",
  "title": "Logic Architect Levels Difficulty Index",
  "description": "Schema for the difficulty-based index of all playable levels",
  "type": "object",
  "required": ["$schema", "version", "generatedAt", "difficulties"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Reference to this schema"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Index version (semver)"
    },
    "generatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when index was generated"
    },
    "totalLevels": {
      "type": "integer",
      "description": "Total number of playable levels (excluding intro)"
    },
    "difficulties": {
      "type": "object",
      "required": ["easy", "medium", "hard"],
      "properties": {
        "easy": {
          "$ref": "#/definitions/difficultyGroup"
        },
        "medium": {
          "$ref": "#/definitions/difficultyGroup"
        },
        "hard": {
          "$ref": "#/definitions/difficultyGroup"
        }
      },
      "additionalProperties": false
    }
  },
  "definitions": {
    "difficultyGroup": {
      "type": "object",
      "required": ["count", "levels"],
      "properties": {
        "count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of levels in this difficulty"
        },
        "totalXP": {
          "type": "integer",
          "minimum": 0,
          "description": "Total XP available in this difficulty"
        },
        "levels": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/levelSummary"
          },
          "description": "Summary of each level in this difficulty"
        }
      }
    },
    "levelSummary": {
      "type": "object",
      "required": ["id", "baseId", "tier", "title", "file"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Full level ID (e.g., level_01_easy)"
        },
        "baseId": {
          "type": "string",
          "description": "Base level ID (e.g., level_01)"
        },
        "tier": {
          "type": "string",
          "enum": ["tier_1", "tier_2", "tier_3", "tier_4", "tier_5", "tier_6"]
        },
        "title": {
          "type": "string"
        },
        "inputs": {
          "type": "integer"
        },
        "maxGates": {
          "type": "integer"
        },
        "xpReward": {
          "type": "integer"
        },
        "gateCount": {
          "type": "integer",
          "description": "Number of available gates"
        },
        "file": {
          "type": "string",
          "description": "Filename in levels-games/"
        }
      }
    }
  }
}
