/* ==========================================
   ACCESSIBILITY STYLES
   ==========================================
   
   This file contains accessibility-focused styles:
   - Focus indicators
   - Screen reader utilities
   - High contrast support
   - Reduced motion support
   ========================================== */


/* ==========================================
   SCREEN READER UTILITIES
   ========================================== */

/* Visually hidden but accessible to screen readers */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Make visible when focused (for skip links) */
.sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
}


/* ==========================================
   FOCUS INDICATORS
   ========================================== */

/* Default focus ring */
:focus {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
}

/* Remove outline for mouse users */
:focus:not(:focus-visible) {
    outline: none;
}

/* Visible focus ring for keyboard users */
:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
}

/* Focus styles for buttons */
.btn:focus-visible,
.btn-icon:focus-visible {
    outline: 2px solid var(--accent-light);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(0, 122, 204, 0.3);
}

/* Focus styles for form elements */
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 1px;
    border-color: var(--accent-color);
}

/* Focus styles for interactive cards */
.roadmap-level:focus-visible,
.gate-item:focus-visible,
.glossary-item:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: -2px;
    box-shadow: inset 0 0 0 2px var(--accent-color);
}

/* Canvas focus indicator */
canvas:focus-visible {
    outline: 3px solid var(--accent-color);
    outline-offset: 0;
}


/* ==========================================
   SKIP LINK
   ========================================== */

.skip-link {
    position: absolute;
    top: -100px;
    left: 0;
    background: var(--accent-color);
    color: var(--text-light);
    padding: var(--spacing-md) var(--spacing-lg);
    z-index: 9999;
    transition: top var(--transition-fast);
    text-decoration: none;
    font-weight: var(--font-weight-semibold);
}

.skip-link:focus {
    top: 0;
}


/* ==========================================
   ARIA LIVE REGIONS
   ========================================== */

/* Live regions styling - ensure they're visually hidden but accessible */
[aria-live="polite"],
[aria-live="assertive"] {
    /* These elements are typically visually hidden but 
       read by screen readers when content changes */
    contain: layout;
}

.aria-status {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}


/* ==========================================
   KEYBOARD SHORTCUTS OVERLAY
   ========================================== */

#keyboard-shortcuts-overlay .shortcuts-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    max-height: 60vh;
    overflow-y: auto;
    text-align: left;
    padding: var(--spacing-md) 0;
}

.shortcut-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-sm);
}

.shortcut-item kbd {
    background: var(--bg-color-light);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    font-family: var(--font-family-mono);
    font-size: var(--font-size-sm);
    color: var(--text-light);
    box-shadow: var(--shadow-sm);
    white-space: nowrap;
}

.shortcut-item span {
    color: var(--text-muted);
    font-size: var(--font-size-sm);
}


/* ==========================================
   REDUCED MOTION
   ========================================== */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    .completion-icon {
        animation: none;
    }
}


/* ==========================================
   HIGH CONTRAST MODE
   ========================================== */

@media (prefers-contrast: high) {
    /* Increase border visibility */
    .btn,
    .btn-icon,
    .gate-item,
    .roadmap-level,
    .glossary-item {
        border: 2px solid currentColor;
    }
    
    /* Ensure text contrast */
    .text-muted,
    .stat-label,
    .glossary-expansion {
        color: var(--text-color);
    }
    
    /* Stronger focus indicators */
    :focus-visible {
        outline: 3px solid currentColor;
        outline-offset: 3px;
    }
    
    /* Remove subtle backgrounds */
    .completion-stats,
    .completion-summary {
        background: var(--bg-color);
        border: 1px solid var(--border-color);
    }
}


/* ==========================================
   COLOR BLINDNESS SUPPORT
   ========================================== */

/* Don't rely on color alone for status */
.message-area.success::before {
    content: "✓ ";
}

.message-area.error::before {
    content: "✕ ";
}

.message-area.warning::before {
    content: "⚠ ";
}

/* Wire states have shapes in addition to colors (handled in CanvasRenderer) */


/* ==========================================
   TOUCH TARGET SIZES
   ========================================== */

@media (pointer: coarse) {
    /* Ensure minimum 44x44px touch targets */
    .btn,
    .btn-icon,
    .tab-btn,
    .gate-item,
    .glossary-tab {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* Add padding to small interactive elements */
    .term-link {
        padding: 4px 2px;
        margin: -4px -2px;
    }
}
